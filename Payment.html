<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Favicon -->
  <link rel="icon" href="src/favicon.ico" type="image/x-icon">
  <link rel="shortcut icon" href="src/favicon.ico" type="image/x-icon">
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1,user-scalable=no" />
  <title>Premium Payment Website</title>
      <link
      href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.3/dist/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@7.12.15/dist/sweetalert2.all.min.js"></script>
</head>

<style>
  /* Reset & base */
*, *::before, *::after {
  box-sizing: border-box;
}
body, html {
  margin: 0;
  padding: 0;
  height: 100%;
  font-family: 'Arial', sans-serif;
  background: url('src/Nashlogo.jpg') no-repeat center center fixed;
  background-size: cover;
  overflow-x: hidden;
  color: #FFFFFF;               /* main text */
  min-height: 100vh;
}

/* Main container */
.main-container {
    width: 100%;
    background: rgba(33, 63, 51, 0.4);
    backdrop-filter: blur(5.8px);
    border-radius: 20px;
    padding-left: 20%;
    padding-right: 20%;
    padding-top: 3%;
    padding-bottom: 3%;
    box-shadow: 0 8px 30px rgba(33, 63, 51, 0.8);
    color: #FFFFFF;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 30px;
    flex-wrap: wrap;
    min-height: 100vh;
    box-sizing: border-box;
  }

/* Headings */
h1 {
  font-size: 3rem;
  font-weight: 900;
  color: #000000;              /* tan accent */
  user-select: none;
}

/* Table container */
.table-container {
    width: 100%;
    background: rgba(33, 63, 51, 0.5);
    border-radius: 20px;
    overflow: hidden;
    box-shadow: 0 8px 30px rgba(33, 63, 51, 0.7);
    margin: 0 auto;
  }

#plan-table {
  width: 100%;
  border-collapse: collapse;
}

#plan-table th, #plan-table td {
  padding: 15px;
  text-align: center;
  vertical-align: middle;
}

#plan-table th {
  background: rgba(203, 177, 142, 0.2);
  font-weight: 900;
  font-size: 1.2rem;
  color: #213F33;                       /* dark green header text */
}

#plan-table td {
  background: rgba(255, 255, 255, 0.05);
  font-weight: 600;
  font-size: 1rem;
  color: #FFFFFF;                       /* white text */
}

#plan-table .plan-image {
  width: 100px;
  height: 100px;
  margin: 0 auto 10px;
}

#plan-table .plan-image img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  border-radius: 10px;
}

.included {
  color: #213F33;
}

.not {
  color: #213F33;
  font-style: italic;
}

.price {
  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
  font-size: 1.1rem;
  letter-spacing: 0.05em;
  color: #CBB18E;      /* tan accent for prices */
}

/* Plan continue button */
.btn-plan-continue {
  margin-top: 10px;
  padding: 10px 26px;
  background-color: #CBB18E;   /* tan background */
  color: #213F33;              /* dark green text */
  font-weight: 700;
  font-size: 1.1rem;
  border: none;
  border-radius: 14px;
  cursor: pointer;
  box-shadow: 0 5px 12px rgba(33, 63, 51, 0.7);
  transition: background-color 0.3s ease;
  user-select: none;
}
.btn-plan-continue:hover,
.btn-plan-continue:focus {
  background-color: #b99a74;   /* darker tan on hover */
  outline: none;
}

#participant-section {
    background: rgba(33, 63, 51, 0.5);
    border-radius: 20px;
    padding: 25px 27px 40px 27px;
    width: 100%;
    box-shadow: 0 8px 24px rgba(33, 63, 51, 0.6);
    color: #FFFFFF;
    display: none;
    flex-direction: column;
    align-items: center;
    gap: 16px;
    box-sizing: border-box;
    user-select: text;
  }
#participant-section img {
  width: 180px;
  height: 180px;
  border-radius: 15px;
  box-shadow: 0 8px 20px rgba(33, 63, 51, 0.8);
  object-fit: cover;
  margin-bottom: 20px;
  user-select: none;
  transition: transform 0.4s ease;
  display: block;
  margin-left: auto;
  margin-right: auto;
}
#participant-section img:hover {
  transform: scale(1.05);
}

form#participant-form {
  width: 100%;
  display: flex;
  flex-direction: column;
  gap: 20px;
  user-select: text;
}

/* First/Last on same line */
.row-inputs {
  display: flex;
  gap: 14px;
  width: 100%;
}
.row-inputs > input,
.row-inputs > select {
  flex: 1;
}
select option {
    background: rgba(33, 63, 51, 0.95); /* dark blur for dropdown list */
    backdrop-filter: blur(6px);
    -webkit-backdrop-filter: blur(6px);
    color: #FFFFFF;
  }

/* Fields styling */
input[type="text"],
input[type="tel"],
input[type="email"],
textarea,
select {
  background: rgba(255, 255, 255, 0.1);
  -webkit-backdrop-filter: blur(8px);
  border: none;
  border-radius: 12px;
  padding: 17px 15px;
  font-size: 1rem;
  backdrop-filter: blur(6px);
  color: #FFFFFF;
  font-weight: 600;
  outline-offset: 2px;
  outline-color: transparent;
  line-height: 1.4;
  font-family: inherit;
  transition: box-shadow 0.25s ease;
  box-sizing: border-box;
  box-shadow: inset 0 0 5px rgba(33, 63, 51, 0.5);
  width: 100%;
}
input[type="text"]:focus,
input[type="tel"]:focus,
input[type="email"]:focus,
textarea:focus,
select:focus {
  box-shadow: 0 0 8px #CBB18E;
  outline-color: #CBB18E;
}
textarea {
  resize: vertical;
  min-height: 80px;
}

label {
  font-weight: 700;
  font-size: 1.1rem;
  margin-bottom: 5px;
  color: #CBB18E;    /* tan labels */
  display: block;
}

/* Committee Preference Dropdown with checkboxes */
.dropdown-container {
  position: relative;
  width: 100%;
  user-select: none;
}
.dropdown-header {
  background-color: rgba(255, 255, 255, 0.1);
  border-radius: 12px;
  padding: 10px 15px;
  font-weight: 700;
  color: #FFFFFF;
  cursor: pointer;
  backdrop-filter: blur(6px);
  display: flex;
  justify-content: space-between;
  align-items: center;
  font-size: 1rem;
  box-shadow: inset 0 0 5px rgba(33, 63, 51, 0.5);
  user-select: none;
}
.dropdown-header::after {
  content: "▾";
  font-size: 1.25rem;
  color: #CBB18E;
  margin-left: 10px;
  transition: transform 0.3s ease;
  user-select: none;
}
.dropdown-header.open::after {
  transform: rotate(180deg);
}
.dropdown-list {
  position: absolute;
  top: 100%;
  left: 0;
  right: 0;
  background: rgba(33, 63, 51, 0.7);
  border-radius: 0 0 12px 12px;
  max-height: 180px;
  overflow-y: auto;
  box-shadow: 0 8px 24px rgba(33, 63, 51, 0.6);
  z-index: 10;
  display: none;
  padding: 5px 10px;
  box-sizing: border-box;
}
.dropdown-list.open {
  display: block;
}
.dropdown-list label {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 6px 8px;
  font-weight: 600;
  color: #FFFFFF;
  cursor: pointer;
  user-select: none;
  border-radius: 8px;
  transition: background-color 0.2s ease;
}
.dropdown-list label:hover {
  background-color: rgba(203, 177, 142, 0.2);
}
.dropdown-list input[type="checkbox"] {
  width: 16px;
  height: 16px;
  cursor: pointer;
  user-select: none;
  filter: drop-shadow(0 0 0.7px #999);
  border-radius: 3px;
}
.blurred-select {
  background: rgba(255, 255, 255, 0.1);
  backdrop-filter: blur(8px);
  border: none;
  border-radius: 12px;
  padding: 10px 15px;
  font-size: 1rem;
  color: #FFFFFF;
  font-weight: 600;
  width: 100%;
  box-shadow: inset 0 0 5px rgba(33, 63, 51, 0.5);
}
.blurred-select option {
  background: rgba(33, 63, 51, 0.9);
  backdrop-filter: blur(6px);
  color: #fff;
}

/* Footer small text */
.footer-text {
  width: 100%;
  text-align: right;
  font-size: 0.75rem;
  font-weight: 700;
  color: #CBB18E;    /* tan footer text */
  user-select: none;
  padding-right: 10px;
  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
}

/* Checkout Modal Styles */
#checkout-modal {
  position: fixed;
  inset: 0;
  background: rgba(33, 63, 51, 0.9);
  display: none;
  justify-content: center;
  align-items: flex-end; /* Align content to the bottom */
  padding-bottom: 20px; /* Space from the bottom edge */
  z-index: 10000;
  user-select: none;
  overflow-y: auto; /* Allow scrolling within modal if needed */
}
#checkout-content {
  background: rgba(33, 63, 51, 0.85);
  border-radius: 20px;
  padding: 30px 40px;
  color: #FFFFFF;
  text-align: center;
  max-width: 400px;
  width: 90%;
  box-shadow: 0 0 40px rgba(203, 177, 142, 0.8);
  position: relative;
}
#checkout-content img#qrCode {
  width: 180px;
  height: 180px;
  border-radius: 20px;
  margin-bottom: 20px;
  box-shadow: 0 0 15px rgba(203, 177, 142, 0.8);
  user-select: none;
}
#checkout-content button#phonePeButton {
  background-color: #CBB18E;
  color: #213F33;
  font-weight: 700;
  border: none;
  padding: 12px 28px;
  border-radius: 12px;
  font-size: 1.2rem;
  cursor: pointer;
  margin-bottom: 20px;
  width: 100%;
  transition: background-color 0.3s ease;
  user-select: none;
}
#checkout-content button#phonePeButton:hover {
  background-color: #b99a74;
}
#checkout-content label.custom-file-button {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  background-color: #CBB18E;
  color: #213F33;
  padding: 8px 12px;
  border-radius: 8px;
  cursor: pointer;
  font-weight: 600;
  margin-bottom: 10px;
}
#checkout-content svg.fa-plus {
  width: 16px;
  height: 16px; /* smaller attach icon */
}
#paymentScreenshot {
  display: none;
}
#file-name {
  display: block;
  font-size: 0.9rem;
  color: #CBB18E;
  font-weight: 600;
  margin-bottom: 15px;
}
#checkout-content button#submitBtn {
  background-color: #CBB18E;
  color: #213F33;
  font-weight: 700;
  border: none;
  padding: 12px 28px;
  border-radius: 12px;
  font-size: 1.2rem;
  cursor: pointer;
  width: 100%;
  transition: background-color 0.3s ease;
  user-select: none;
}
#checkout-content button#submitBtn:hover {
  background-color: #b99a74;
}
#closeCheckoutBtn {
  position: absolute;
  top: 12px;
  right: 12px;
  background: transparent;
  border: none;
  font-size: 1.5rem;
  color: #FFFFFF;
  cursor: pointer;
  user-select: none;
  padding: 4px 8px;
  font-weight: 900;
  line-height: 1;
}
#closeCheckoutBtn:hover {
  color: #CBB18E;
}

.main-container { position: relative; }

.plan-header {
  display: flex;
  align-items: center;
  width: 100%;
}

.back-button {
  margin-right: 16px;
  flex-shrink: 0;
}

.back-button img {
  width: 32px;
  height: 32px;
  object-fit: contain;
  cursor: pointer;
}


/* Custom file upload styles */
.file-upload-label {
  display: block;
  font-weight: 700;
  font-size: 0.9rem;
  margin: 20px 0 6px 0;
  color: #CBB18E;
  cursor: pointer;
}
#cashButton {
  background-color: #FF8C00;
  color: #000000;
  font-weight: 700;
  border: none;
  padding: 12px 28px;
  border-radius: 12px;
  font-size: 1.2rem;
  cursor: pointer;
  width: 100%;
  transition: background-color 0.3s ease;
  user-select: none;
  margin-top: 15px;
}
#cashButton:hover {
  background-color: #e07a00;
}

.custom-file-button {
  display: inline-flex;
  align-items: center;
  background-color: #CBB18E;
  color: #213F33;
  padding: 8px 12px;
  border-radius: 8px;
  margin-top: 5px;
  user-select: none;
}
.custom-file-button svg {
  width: 16px;  /* reduced icon size */
  height: 16px;
  margin-right: 5px;
}
.custom-file-button span {
  font-weight: 600;
}

#confirmationPopup {
  position: fixed;
  inset: 0;
  background: rgba(33, 63, 51, 0.9);
  display: none;
  justify-content: center;
  align-items: flex-end;
  padding-bottom: 170px;        /* moved from padding-bottom */
  z-index: 11000;
  user-select: none;
  overflow-y: auto;
}
#confirmationContent {
  background: rgba(33, 63, 51, 0.85);
  border-radius: 20px;
  padding: 30px 40px;
  color: #FFFFFF;
  text-align: center;
  max-width: 350px;
  box-shadow: 0 0 40px rgba(203, 177, 142, 0.8);
  position: relative;
}
#confirmationContent svg {
  width: 100px;
  height: 100px;
  margin: 0 auto 15px;
  stroke: #FFFFFF;
  stroke-width: 5;
  fill: none;
  stroke-linecap: round;
  stroke-linejoin: round;
  animation: drawcheck 0.8s forwards;
  user-select: none;
}
#confirmationContent h2 {
  margin-bottom: 15px;
  font-weight: 900;
  font-size: 1.8rem;
  color: #CBB18E;
}
#confirmationContent p {
  font-weight: 600;
}
#closeConfirmationBtn {
  background: #CBB18E;
  color: #213F33;
  border: none;
  padding: 10px 24px;
  border-radius: 12px;
  font-weight: 700;
  cursor: pointer;
  margin-top: 25px;
  user-select: none;
}
#closeConfirmationBtn:hover {
  background: #b99a74;
}

/* Animations */
@keyframes drawcheck {
  0%   { stroke-dashoffset: 100; stroke-dasharray: 100; }
  100% { stroke-dashoffset: 0;   stroke-dasharray: 100; }
}

/* Responsive */
@media (max-width: 900px) {
  .table-container {
    overflow-x: auto;
  }
  .main-container {
    padding: 15px 10px;
  }
  #participant-section {
    width: 95%;
    padding: 20px 20px 30px 20px;
  }
  .row-inputs {
    flex-direction: column;
  }
}
.preference-selector {
  margin-bottom: 20px; /* spacing between committee boxes */
}

.preference-selector select {
  background: rgba(255, 255, 255, 0.1);
  backdrop-filter: blur(8px);
  -webkit-backdrop-filter: blur(8px);
  border: none;
  border-radius: 12px;
  padding: 18px 15px;
  font-size: 1.1rem;
  color: #FFFFFF;
  font-weight: 600;
  width: 100%;
  box-shadow: inset 0 0 5px rgba(33, 63, 51, 0.5);
  appearance: none;
  min-height: 56px;
  line-height: 1.4;
}

.preference-selector select option {
  background: rgba(33, 63, 51, 0.95);
  backdrop-filter: blur(6px);
  color: #FFFFFF;
}

</style>


<body>
  <div class="main-container" role="main" aria-label="Plan comparison and participant registration">
    <div class="plan-header">
  <a href="index.html" class="back-button">
    <img src="src/back-icon.png" alt="Back" height="50" width="50" />
  </a>
  <h1>Choose Your Plan</h1>
</div>




    <div class="table-container">
      <table id="plan-table">
        <thead>
          <tr>
            <th>Feature</th>
            <th>
              <div class="plan-image">
                <img src="src/mun1.jpg" alt="With MUN + Socials Image" loading="lazy" />
              </div>
              With MUN + Socials
            </th>
            <th>
              <div class="plan-image">
                <img src="src/m1.avif" alt="MUN Only Image" loading="lazy" />
              </div>
              MUN Only
            </th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>Committee Sessions</td>
            <td><span class="included">✅ Included</span></td>
            <td><span class="included">✅ Included</span></td>
          </tr>
          <tr>
            <td>Delegate Kits</td>
            <td><span class="included">✅ Included</span></td>
            <td><span class="included">✅ Included</span></td>
          </tr>
          <tr>
            <td>Certificates</td>
            <td><span class="included">✅ Included</span></td>
            <td><span class="included">✅ Included</span></td>
          </tr>
          <tr>
            <td>Refreshments</td>
            <td><span class="included">✅ Included</span></td>
            <td><span class="included">✅ Included</span></td>
          </tr>
          <tr>
            <td>Socials Night (music, networking, etc.)</td>
            <td><span class="included">✅ Included</span></td>
            <td><span class="not">❌ Not included</span></td>
          </tr>
          <tr>
          <tr>
            <td>Payment Amount</td>
            <td><span class="price" id="price-with-socials"></span></td>
            <td><span class="price" id="price-mun-only"></span></td>
          </tr>
          <tr>
            <td></td>
            <td><button class="btn-plan-continue" data-plan="With MUN + Socials">Continue</button></td>
            <td><button class="btn-plan-continue" data-plan="MUN Only">Continue</button></td>
          </tr>
        </tbody>
      </table>
    </div>

    <section id="participant-section" aria-label="Participant Details Form">
      <form id="participant-form" enctype="multipart/form-data" novalidate>
  <div style="margin-bottom:20px;">
    <label for="planSelect" style="font-weight:700; font-size:1.1rem; color:#CBB18E;">Selected Plan</label>
    <input type="text" id="planSelect" name="planSelect" disabled style="background:#ddd; border:none; border-radius:8px; padding:10px 15px; font-size:1rem; color:#333; width:100%;"/>
  </div>
  <div class="row-inputs">
    <div style="flex:1;">
      <label for="firstName">First Name</label>
      <input id="firstName" name="first_name" type="text" placeholder="First Name" autocomplete="given-name" required />
    </div>
    <div style="flex:1;">
      <label for="lastName">Last Name</label>
      <input id="lastName" name="last_name" type="text" placeholder="Last Name" autocomplete="family-name" required />
    </div>
  </div>
    <!-- Country Ambasiter field -->
<input id="oc" name="campus_ambassador_oc_referral" type="text" placeholder="Campus Ambassador / OC Referral" required />


  <div style="flex:1;">
    <label for="email">Email Address</label>
    <input id="email" name="email" type="email" placeholder="Email Address" autocomplete="email" required />
  </div>
  <div>
    <label for="phoneNumber">Phone Number</label>
    <input id="phoneNumber" name="phone_number" type="tel" placeholder="Phone Number" autocomplete="tel" required pattern="^[0-9+\-\s]{7,15}$" />
  </div>
  <div>
    <label for="schoolInstitution">School / Institution</label>
    <input id="schoolInstitution" name="school_institution" type="text" placeholder="School / Institution" required />
  </div>
  <div class="row-inputs">
    <div style="flex:1;">
      <label for="gradeLevel">Grade Level</label>
      <select id="gradeLevel" name="grade_level" required>
        <option value="" disabled selected>Select Grade Level</option>
        <option>9t or below</option>
        <option>10th</option>
           <option>11th</option>
              <option>12th</option>
                 <option>College<option>
        
      </select>
    </div>
    <div style="flex:1;">
      <label for="munExperience">MUN Experience</label>
      <select id="munExperience" name="mun_experience" required>
        <option value="" disabled selected>Select MUN Experience</option>
        <option>None (First Timer)</option>
        <option>1-2 Conferences</option>
        <option>3-5 Conferences</option>
        <option>5+ Conferences</option>
      </select>
    </div>
  </div>
<!-- Committee Preferences Section -->
<div>
  <label style="color:#CBB18E; font-weight:700; font-size:1.1rem;">Committee Preferences (Max 3)</label>

  <div class="preference-selector">
    <label for="committeePreference1" style="color:#CBB18E;">1st Preference (Highest Priority)</label>
    <select id="committeePreference1" name="committee_1" required class="blurred-select">
      <option value="" disabled selected>Select 1st Preference</option>
      <option>CRISIS GENESIS COUNCIL</option>
      <option>UNITED NATIONS OFFICE OF DRUGS AND CRIME</option>
      <option>COLD WAR</option>
      <option>UNITED NATIONS WOMENS</option>
      <option>LOK SABHA</option>
      <option>INTERNATIONAL PRESS</option>
      <option>DISARMAMENT AND INTERNATIONAL SECURITY COUNCIL</option>
      <option>No Preference</option>
    </select>
  </div>

  <div class="preference-selector">
    <label for="committeePreference2" style="color:#CBB18E;">2nd Preference</label>
    <select id="committeePreference2" name="committee_2" required class="blurred-select">
      <option value="" disabled selected>Select 2nd Preference</option>
      <option>CRISIS GENESIS COUNCIL</option>
      <option>UNITED NATIONS OFFICE OF DRUGS AND CRIME</option>
      <option>COLD WAR</option>
      <option>UNITED NATIONS WOMENS</option>
      <option>LOK SABHA</option>
      <option>INTERNATIONAL PRESS</option>
      <option>DISARMAMENT AND INTERNATIONAL SECURITY COUNCIL</option>
      <option>No Preference</option>
    </select>
  </div>

  <div class="preference-selector">
    <label for="committeePreference3" style="color:#CBB18E;">3rd Preference (Lowest Priority)</label>
    <select id="committeePreference3" name="committee_3" required class="blurred-select">
      <option value="" disabled selected>Select 3rd Preference</option>
      <option>CRISIS GENESIS COUNCIL</option>
      <option>UNITED NATIONS OFFICE OF DRUGS AND CRIME</option>
      <option>COLD WAR</option>
      <option>UNITED NATIONS WOMENS</option>
      <option>LOK SABHA</option>
      <option>INTERNATIONAL PRESS</option>
      <option>DISARMAMENT AND INTERNATIONAL SECURITY COUNCIL</option>
      <option>No Preference</option>
    </select>
  </div>
</div>



  <div>
    <label for="countryPreference">Country Preference</label>
    <textarea id="countryPreference" name="country_preference" rows="3" placeholder="Country Preference"></textarea>
  </div>
  <div>
    <label for="specialNeeds">Special Needs / Requests</label>
      <textarea id="specialNeeds" name="special_needs" rows="3" placeholder="Special Needs / Requests"></textarea>
    </div>
      <button id="continueBtn" type="button" style="margin-top: 15px; background-color: #233f33; color: #fff7ed; font-weight: 700; border: none; padding: 12px 20px; border-radius: 12px; font-size: 1.1rem; cursor: pointer;">Continue to Checkout</button>
    </form>
      <div class="footer-text"></div>
    </section>

    <!-- Checkout Modal -->
<div id="checkout-modal" role="dialog" aria-modal="true" aria-labelledby="checkoutTitle" aria-describedby="checkoutDesc">
  <div id="checkout-content">
    <button id="closeCheckoutBtn" aria-label="Close checkout window">×</button>
    <h2 id="checkoutTitle" style="margin-bottom: 15px; font-weight: 900; color: #233f33;">Checkout</h2>
    <img id="qrCode" alt="Payment QR Code" />
    <button id="phonePeButton" type="button">Pay with PhonePe</button>
    <button id="cashButton" style="background-color:#00BFFF;color:#000;border:none;padding:12px 28px;border-radius:12px;font-size:1.2rem;font-weight:700;width:100%;cursor:pointer;margin-top:10px;">
  <i class="fas fa-money-bill-wave" style="margin-right:10px;"></i> Pay with Cash
</button>

    <label for="paymentScreenshot" class="file-upload-label">
      Attach Payment Screenshot
      <div class="custom-file-button">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <line x1="12" y1="5" x2="12" y2="19"></line>
          <line x1="5" y1="12" x2="19" y2="12"></line>
        </svg>
        <span>Choose File</span>
      </div>
    </label>
    <input type="file" id="paymentScreenshot" name="payment_screenshot" accept="image/*" required style="display: none;" />
    <span id="file-name" style="display: block; margin-top: 5px; font-size: 0.9rem; color: #CBB18E; font-weight: 600;">No file chosen</span>
    
    <!-- Registration Notice -->
    <div style="background: rgba(203, 177, 142, 0.1); border: 2px solid #CBB18E; border-radius: 12px; padding: 15px; margin: 20px 0; text-align: center;">
      <p style="margin: 0; font-size: 0.95rem; font-weight: 700; color: #CBB18E; line-height: 1.4;">
        ⚠️ Please wait for registration to be held valid after pressing Submit.
      </p>
    </div>
    
    <button id="submitBtn" type="button">Submit</button>
  </div>
</div>

    <!-- Confirmation popup -->
    <div id="confirmationPopup" role="dialog" aria-modal="true" aria-labelledby="confirmationTitle" aria-describedby="confirmationDesc">
      <div id="confirmationContent">
        <svg viewBox="0 0 52 52" style="width: 100px; height: 100px; margin: 0 auto 15px; stroke:#1e1e1e; stroke-width: 5; fill:none; stroke-linecap: round; stroke-linejoin: round; animation: drawcheck 0.8s forwards;">
          <circle cx="26" cy="26" r="25" />
          <path d="M14 27l7 7 16-16" />
        </svg>
        <h2 id="confirmationTitle">Payment Submitted Successfully!</h2>
        <p id="confirmationDesc">Thank you for your submission.</p>
        <button id="closeConfirmationBtn">Close</button>
      </div>
    </div>

  </div>
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<!-- SweetAlert2 -->
<script>
(() => {
  const scriptURL = 'https://script.google.com/macros/s/AKfycbzSxiUEzgTVIEgRGINRtRxBSOCIJHE5NdMuIH0BjryoyEhj9fZi3-IN4_CRtiti3_XSCA/exec';
  const plansURL = 'https://raw.githubusercontent.com/parth-sancheti-5/NashCon/main/config.json';

  let plans = {};

  // Fetch plans from GitHub and update prices
  fetch(plansURL)
    .then(r => r.json())
    .then(data => {
      plans = data;
      const withSocials = document.getElementById('price-with-socials');
      const munOnly = document.getElementById('price-mun-only');
      if (withSocials) withSocials.textContent = plans["With MUN + Socials"].price;
      if (munOnly) munOnly.textContent = plans["MUN Only"].price;
    })
    .catch(err => {
      console.error('Price fetch failed:', err);
      Swal.fire('Error', 'Could not load plan pricing.', 'error');
    });

  // DOM Elements
  const form = document.getElementById('participant-form');
  const planButtons = document.querySelectorAll('.btn-plan-continue');
  const participantSection = document.getElementById('participant-section');
  const planSelectInput = document.getElementById('planSelect');
  const continueBtn = document.getElementById('continueBtn');
  const checkoutModal = document.getElementById('checkout-modal');
  const qrCodeImage = document.getElementById('qrCode');
  const phonePeBtn = document.getElementById('phonePeButton');
  const cashBtn = document.getElementById('cashButton');
  const submitBtn = document.getElementById('submitBtn');
  const confirmationPopup = document.getElementById('confirmationPopup');
  const closeConfirmationBtn = document.getElementById('closeConfirmationBtn');
  const closeCheckoutBtn = document.getElementById('closeCheckoutBtn');
  const paymentScreenshotInput = document.getElementById('paymentScreenshot');

  const pref1 = document.getElementById('committeePreference1');
  const pref2 = document.getElementById('committeePreference2');
  const pref3 = document.getElementById('committeePreference3');

  let selectedPlan = null;

  // Plan selection logic
  planButtons.forEach(btn => {
    btn.addEventListener('click', () => {
      selectedPlan = btn.dataset.plan;
      planSelectInput.value = selectedPlan;
      document.querySelector('.table-container').style.display = 'none';
      document.querySelector('h1').style.display = 'none';
      participantSection.style.display = 'flex';
      participantSection.scrollIntoView({ behavior: 'smooth' });
      form.firstName.focus();
    });
  });

  // Continue to payment
  continueBtn.addEventListener('click', () => {
    if (!form.reportValidity()) return;
    if (!selectedPlan || !plans[selectedPlan]) {
      Swal.fire('Error', 'Invalid plan selected.', 'error');
      return;
    }

    qrCodeImage.src = plans[selectedPlan].qr;
    qrCodeImage.alt = `QR code for ${selectedPlan}`;

    phonePeBtn.onclick = () => {
      Swal.fire('Info', 'Please use your UPI app to scan the QR code.', 'info');
    };

    checkoutModal.style.display = 'flex';
    window.scrollTo({ top: 0, behavior: 'smooth' });
  });

  // Close checkout modal
  closeCheckoutBtn.addEventListener('click', () => {
    checkoutModal.style.display = 'none';
    paymentScreenshotInput.value = '';
    document.getElementById('file-name').textContent = 'No file chosen';
  });

  // Screenshot validation
  paymentScreenshotInput.addEventListener('change', () => {
    const file = paymentScreenshotInput.files[0];
    const name = file ? file.name : 'No file chosen';
    document.getElementById('file-name').textContent = name;
    if (file) {
      if (!['image/png', 'image/jpeg'].includes(file.type)) {
        Swal.fire('Error', 'Use PNG or JPEG.', 'error');
        paymentScreenshotInput.value = '';
        document.getElementById('file-name').textContent = 'No file chosen';
      } else if (file.size > 1024 * 1024) {
        Swal.fire('Error', 'File must be < 1MB.', 'error');
        paymentScreenshotInput.value = '';
        document.getElementById('file-name').textContent = 'No file chosen';
      }
    }
  });

  // Cash Payment
  cashBtn.addEventListener('click', () => {
    if (!form.reportValidity()) {
      Swal.fire('Oops', 'Please complete all fields.', 'warning');
      return;
    }


  cashBtn.disabled = true;
  checkoutModal.innerHTML = `
    <div style="width:100%;height:100vh;display:flex;justify-content:center;align-items:flex-end;padding-bottom:200px;">
      <img src="src/sub_loader.gif" alt="Submitting..." style="height:40vh;">
    </div>`;


    const fd = new FormData(form);
    fd.append('plan_select', selectedPlan);
    fd.append('committee_1', pref1.value);
    fd.append('committee_2', pref2.value);
    fd.append('committee_3', pref3.value);
    fd.append('payment_screenshot', '');

    fetch(scriptURL, { method: 'POST', body: fd })
      .then(res => res.json())
      .then(data => {
        if (data.result === 'success') {
          form.reset();
          confirmationPopup.style.display = 'flex';
          checkoutModal.style.display = 'none';
        } else {
          Swal.fire('Error', data.error, 'error');
        }
      })
      .catch(err => Swal.fire('Error', err.message, 'error'));
  });

  // Online Payment
  submitBtn.addEventListener('click', () => {
    const file = paymentScreenshotInput.files[0];
    if (!file) {
      Swal.fire('Oops', 'Attach a screenshot.', 'warning');
      return;
    }
    if (!form.reportValidity()) {
      Swal.fire('Oops', 'Please complete all fields.', 'warning');
      return;
    }

  submitBtn.disabled = true;
  checkoutModal.innerHTML = `
    <div style="width:100%;height:100vh;display:flex;justify-content:center;align-items:flex-end;padding-bottom:200px;">
      <img src="src/sub_loader.gif" alt="Submitting..." style="height:40vh;">
    </div>`;

    const reader = new FileReader();
    reader.onload = () => {
      const fd = new FormData(form);
      fd.append('plan_select', selectedPlan);
      fd.append('committee_1', pref1.value);
      fd.append('committee_2', pref2.value);
      fd.append('committee_3', pref3.value);
      fd.append('payment_screenshot', reader.result);

      fetch(scriptURL, { method: 'POST', body: fd })
        .then(res => res.json())
        .then(data => {
          if (data.result === 'success') {
            form.reset();
            confirmationPopup.style.display = 'flex';
            checkoutModal.style.display = 'none';
          } else {
            Swal.fire('Error', data.error, 'error');
          }
        })
        .catch(err => Swal.fire('Error', err.message, 'error'));
    };
    reader.readAsDataURL(file);
  });

  // Close confirmation → redirect
  closeConfirmationBtn.addEventListener('click', () => {
    window.location.href = 'https://nashcon.in';
  });

})();
</script>


</body>
</html>

